# åŸºç¡€é…ç½®æ¨¡å— - å¸¸è§„è®¾ç½®
# ç«¯å£å’ŒåŸºç¡€é…ç½®
port: 7890
allow-lan: true
bind-address: "*"
mode: rule
log-level: info
unified-delay: true
global-client-fingerprint: chrome
secret: 62132

# é”šç‚¹å®šä¹‰
rules-domain: &rules-domain 
  type: http
  interval: 86400
  behavior: domain

rules-ip: &rules-ip 
  type: http
  interval: 86400
  behavior: ipcidr

rules-classical: &rules-classical 
  type: http
  interval: 86400
  behavior: classical

# DNSé…ç½®æ¨¡å— - ç™½åå•æ¨¡å¼
dns:
  enable: true
  ipv6: false
  respect-rules: true
  enhanced-mode: 
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
    - "+.market.xiaomi.com"
  default-nameserver:      #åŸºç¡€DNSæœåŠ¡å™¨ï¼Œå¿…é¡»å…ˆæœ‰å®ƒæ‰èƒ½ä½¿ç”¨åŸŸåç±»å‹çš„DNSé…ç½®ï¼Œå› æ­¤å¿…é¡»ä¸ºIPï¼Œæ­¤å¤„ä½¿ç”¨é˜¿é‡Œäº‘DNS
    - tls://223.5.5.5
    - tls://223.6.6.6
  nameserver:         #åœ¨è®¿é—®çš„å›½å¤–ç½‘ç«™æ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•åŸŸåè§„åˆ™ï¼Œæœ€ç»ˆèµ°äº†MATCHå…œåº•è§„åˆ™æ—¶ä½¿ç”¨çš„DNSï¼Œä¸ºäº†ç¡®ä¿ä¸å‘ç”ŸDNSæ³„æ¼å’ŒDNSæ±¡æŸ“ï¼Œå¿…é¡»ä½¿ç”¨å›½å¤–DNS
    - https://cloudflare-dns.com/dns-query
    - https://dns.google/dns-query
  proxy-server-nameserver:         #è§£æä»£ç†èŠ‚ç‚¹æ—¶ä½¿ç”¨çš„DNSï¼Œä¸ºäº†ä½¿ä¸‹é¢çš„respect-rulesç”Ÿæ•ˆå¿…é¡»è®¾ç½®ï¼Œæœ€å¥½è®¾ç½®ä¸ºå›½å†…DNSï¼Œå¦åˆ™åœ¨ä»£ç†çš„ç¬¬ä¸€æ­¥å°±å¯èƒ½å› ä¸ºè¿æ¥ä¸ä¸Šå›½å¤–DNSè€Œè§£æä¸å‡ºä»£ç†èŠ‚ç‚¹çš„IPï¼Œæœ€ç»ˆå€’åœ¨èµ·ç‚¹
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  direct-nameserver:           #è§„åˆ™åŒ¹é…åˆ°ç›´è¿æ—¶ä½¿ç”¨çš„DNSï¼Œæ—¢ç„¶æ˜¯å¯ä»¥ç›´è¿çš„ï¼Œå½“ç„¶è¦ç”¨å›½å†…DNS
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query

proxy-groups:
  # ----------------------------------------------------------------
  # ğŸ¯ æ ¸å¿ƒå…¥å£ç­–ç•¥ç»„ 
  # ----------------------------------------------------------------
  - name: ğŸ¯ PROXY  
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: select
    proxies:
      - ğŸ’¸ ç»æµèŠ‚ç‚¹  
      - âœ¨ ç²¾å“çº¿è·¯ 
      - ğŸ›¬ è½åœ°èŠ‚ç‚¹  
      - ğŸ  æˆ‘çš„èŠ‚ç‚¹ 
      - DIRECT

  - name: ğŸ¤– AI ä¸“ç”¨
    interval: 3000
    timeout: 1500
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: select
    proxies:
      - webshare 
      - ğŸ‡ºğŸ‡¸ ç¾-è½åœ°
      - ğŸ‡ºğŸ‡¸ ç¾-ç²¾å“
      - ğŸ‡¯ğŸ‡µ æ—¥-è½åœ°
      - ğŸ‡¯ğŸ‡µ æ—¥-ç²¾å“
      - ğŸ‡¸ğŸ‡¬ æ–°-è½åœ°
      - ğŸ‡¸ğŸ‡¬ æ–°-ç²¾å“
      - ğŸ‡¹ğŸ‡¼ å°-è½åœ°
      - ğŸ‡¹ğŸ‡¼ å°-ç²¾å“
      - ğŸ  æˆ‘çš„èŠ‚ç‚¹
      - ğŸŒ å…¶ä»–åœ°åŒº

  - name: ğŸ’¸ ç»æµèŠ‚ç‚¹
    interval: 300
    timeout: 1500
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: url-test
    proxies: []
   
  - name: âœ¨ ç²¾å“çº¿è·¯
    interval: 300
    timeout: 1000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: select
    proxies: 
      - ğŸš— Auto-ç²¾å“
      - ğŸ‡­ğŸ‡° æ¸¯-ç²¾å“
      - ğŸ‡ºğŸ‡¸ ç¾-ç²¾å“
      - ğŸ‡¯ğŸ‡µ æ—¥-ç²¾å“
      - ğŸ‡¸ğŸ‡¬ æ–°-ç²¾å“
      - ğŸ‡¹ğŸ‡¼ å°-ç²¾å“
      - ğŸ˜ƒ æˆ‘çš„ä¸­è½¬

  - name: ğŸ›¬ è½åœ°èŠ‚ç‚¹
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    type: select
    proxies:
      - ğŸ‡ºğŸ‡¸ ç¾-è½åœ°
      - ğŸ‡¯ğŸ‡µ æ—¥-è½åœ°
      - ğŸ‡¸ğŸ‡¬ æ–°-è½åœ°
      - ğŸ‡¹ğŸ‡¼ å°-è½åœ°
      - ğŸ‡³ğŸ‡¬ å°¼-è½åœ°
      - ğŸŒ å…¶ä»–åœ°åŒº
      - ğŸ  æˆ‘çš„èŠ‚ç‚¹ 
      - webshare 

  - name: ğŸ  æˆ‘çš„èŠ‚ç‚¹
    interval: 3000
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: select
    proxies: []

  # --- å„åŒºåŸŸå…·ä½“åˆ†ç»„ ---
  - name: ğŸ‡ºğŸ‡¸ ç¾-è½åœ°
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: select
    proxies: []

  - name: ğŸ‡¯ğŸ‡µ æ—¥-è½åœ°
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: select
    proxies: []

  - name: ğŸ‡¸ğŸ‡¬ æ–°-è½åœ°
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: select
    proxies: []

  - name: ğŸ‡¹ğŸ‡¼ å°-è½åœ°
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: select
    proxies: []

  - name: ğŸ‡³ğŸ‡¬ å°¼-è½åœ°
    interval: 30000
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: select
    proxies: []

  - name: ğŸŒ å…¶ä»–åœ°åŒº
    interval: 86400
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: select
    proxies: []

  # ----------------------------------------------------------------
  - name: ğŸš— Auto-ç²¾å“
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: url-test
    proxies: []

  - name: ğŸ˜ƒ æˆ‘çš„ä¸­è½¬
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: select
    proxies: []

  - name: ğŸ‡­ğŸ‡° æ¸¯-ç²¾å“
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: url-test
    proxies: []

  - name: ğŸ‡ºğŸ‡¸ ç¾-ç²¾å“
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: url-test
    proxies: []

  - name: ğŸ‡¯ğŸ‡µ æ—¥-ç²¾å“
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: url-test
    proxies: []

  - name: ğŸ‡¸ğŸ‡¬ æ–°-ç²¾å“
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: url-test
    proxies: []
  
  - name: ğŸ‡¹ğŸ‡¼ å°-ç²¾å“
    interval: 300
    timeout: 2000
    url: "https://www.gstatic.com/generate_204"
    lazy: true
    max-failed-times: 3
    type: url-test
    proxies: []

  # ----------------------------------------------------------------
  # ğŸ›¡ï¸ åŠŸèƒ½æ€§åˆ†ç»„
  # ----------------------------------------------------------------
  - name: ğŸš« å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies:
      - REJECT
      - ğŸ¯ PROXY 
      - DIRECT

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - DIRECT
      - ğŸ¯ PROXY

# è§„åˆ™é…ç½®æ¨¡å— - åŒ…å«è§„åˆ™é›†å’Œè·¯ç”±è§„åˆ™
# æ³¨æ„ï¼šæ­¤æ¨¡å—æä¾›åŸºç¡€çš„è§„åˆ™é›†å’Œè§„åˆ™é…ç½®
# substore è„šæœ¬å¯èƒ½ä¼šè¦†ç›–æˆ–è¡¥å……è¿™äº›é…ç½®
rule-providers:
  # ä¸ªäººä¸“ç”¨
  ry-direct:
    <<: *rules-classical
    url: "https://github.com/rammusry/rules/raw/refs/heads/main/rules/ry-rule-direct.yaml"
    path: ./ruleset/ry-direct.yaml

  ry-proxy:
    <<: *rules-classical
    url: "https://github.com/rammusry/rules/raw/refs/heads/main/rules/ry-rule-proxy.yaml"
    path: ./ruleset/ry-proxy.yaml

  ry-selector:
    <<: *rules-classical
    url: "https://github.com/rammusry/rules/raw/refs/heads/main/rules/ry-rule-selector.yaml"
    path: ./ruleset/ry-selector.yaml

  ry-reject:
    <<: *rules-classical
    url: "https://github.com/rammusry/rules/raw/refs/heads/main/rules/ry-rule-reject.yaml"
    path: ./ruleset/ry-reject.yaml
  
  ry-pure:
    <<: *rules-classical
    url: "https://github.com/rammusry/rules/raw/refs/heads/main/rules/ry-rule-pure.yaml"
    path: ./ruleset/ry-pure.yaml

  # AI ç±»
  OpenAI:
    <<: *rules-classical
    path: ./rules/blackmatrix7/OpenAI.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OpenAI/OpenAI.yaml"

  Gemini:
    <<: *rules-classical
    path: ./rules/blackmatrix7/Gemini.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Gemini/Gemini.yaml"

  Anthropic:
    <<: *rules-classical
    path: ./rules/blackmatrix7/Claude.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Anthropic/Anthropic.yaml"

  Copilot:
    <<: *rules-classical
    path: ./rules/blackmatrix7/Copilot.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Copilot/Copilot.yaml"

  # å¹¿å‘Šç±»
  Advertising:
    <<: *rules-classical
    path: ./rules/blackmatrix7/Advertising_Classical.yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising_Classical.yaml"

  # éœ€è¦ä»£ç†
  gfw:
    <<: *rules-domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/Loyalsoldier/gfw.yaml

  proxy:
    <<: *rules-domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/Loyalsoldier/proxy.yaml

  tld-not-cn:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
    path: ./ruleset/Loyalsoldier/tld-not-cn.yaml

  ProxyClient:
    <<: *rules-classical
    path: ./rules/zuluion/ProxyClient.yaml
    url: "https://cdn.jsdelivr.net/gh/zuluion/Clash-Template-Config@master/Filter/ProxyClient.yaml"

  Paypal:
    <<: *rules-classical
    path: ./rules/blackmatrix7/Paypal.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/PayPal/PayPal.yaml"
  

  # æ— éœ€ä»£ç†
  ChinaDomain:
    <<: *rules-domain
    path: ./rules/ACL4SSR/ChinaDomain.yaml
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list"

  ChinaCompanyIp:
    <<: *rules-ip
    path: ./rules/ACL4SSR/ChinaCompanyIp.yaml
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list"

  cncidr:
    <<: *rules-ip
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/Loyalsoldier/cncidr.yaml

  lancidr:
    <<: *rules-ip
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/Loyalsoldier/lancidr.yaml

  # æœåŠ¡ç±»
  Talkatone:
    <<: *rules-classical
    url: "https://raw.githubusercontent.com/mottzz87/crules/refs/heads/main/rule/talkatone.list"
    path: ./ruleset/mottzz87/talkatone.list

  Telegram:
    <<: *rules-classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml"
    path: ./ruleset/blackmatrix7/Telegram.yaml

  # æ¸¸æˆç±»
  Steam:
    type: http
    behavior: classical
    format: yaml
    path: ./rules/Steam.yaml
    url: "https://cdn.jsdelivr.net/gh/zuluion/Clash-Template-Config@master/Filter/Steam.yaml"
    interval: 86400

# è·¯ç”±è§„åˆ™é…ç½®
# è¯·è®¾ç½®åŸŸåç±»è§„åˆ™ä¼˜å…ˆï¼Œipç±»è§„åˆ™ç½®åï¼
rules:
  - PROCESS-NAME,com.talkatone.android,ğŸ¤– AI ä¸“ç”¨
  - RULE-SET,ry-direct,DIRECT
  - RULE-SET,ry-selector,âœ¨ ç²¾å“çº¿è·¯
  - RULE-SET,ry-proxy,ğŸ¯ PROXY
  - RULE-SET,ry-reject,ğŸš« å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,ry-pure,ğŸ¤– AI ä¸“ç”¨
  - RULE-SET,OpenAI,ğŸ¤– AI ä¸“ç”¨
  - RULE-SET,Gemini,ğŸ¤– AI ä¸“ç”¨
  - RULE-SET,Anthropic,ğŸ¤– AI ä¸“ç”¨
  - RULE-SET,Copilot,ğŸ¤– AI ä¸“ç”¨
  - RULE-SET,Paypal,âœ¨ ç²¾å“çº¿è·¯
  - RULE-SET,gfw,ğŸ¯ PROXY
  - RULE-SET,proxy,ğŸ¯ PROXY
  - RULE-SET,tld-not-cn,ğŸ¯ PROXY
  - RULE-SET,ProxyClient,ğŸ¯ PROXY,no-resolve
  - RULE-SET,Telegram,ğŸ¯ PROXY
  - RULE-SET,Steam,ğŸ¯ PROXY
  - RULE-SET,ChinaDomain,DIRECT
  - RULE-SET,ChinaCompanyIp,DIRECT,no-resolve
  - RULE-SET,cncidr,DIRECT,no-resolve
  - RULE-SET,lancidr,DIRECT,no-resolve
  - RULE-SET,Advertising,ğŸš« å¹¿å‘Šæ‹¦æˆª
  - GEOSITE,cn,DIRECT
  - MATCH, ğŸŸ æ¼ç½‘ä¹‹é±¼